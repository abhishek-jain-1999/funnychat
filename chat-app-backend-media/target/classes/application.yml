spring:
  application:
    name: chat-app-backend-media

  profiles:
    active: local

# MinIO Configuration (local default)
minio:
  endpoint: http://localhost:9000
  access-key: minioadmin
  secret-key: minioadmin
  bucket: chat-media
  region: us-east-1
  presigned-upload-expiry-seconds: 3600
  presigned-download-expiry-seconds: 1800
  public-url: http://localhost:9000

# Media service configuration
media:
  max-file-size: 2147483648
  allowed-mime-types: image/jpeg,image/png,image/webp,image/gif
  service:
    token: ${MEDIA_SERVICE_TOKEN:}

# Actuator endpoints
management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: always

# Logging configuration
logging:
  level:
    com.abhishek.media_service: DEBUG
    org.springframework.security: DEBUG
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %msg%n"

# OpenAPI Documentation
springdoc:
  api-docs:
    path: /api-docs
  swagger-ui:
    path: /swagger-ui.html

---
# Prod profile: running inside docker-compose/k8s
spring:
  config:
    activate:
      on-profile: prod

minio:
  access-key: ${MINIO_ACCESS_KEY}
  secret-key: ${MINIO_SECRET_KEY}
  bucket: ${MINIO_BUCKET}
  region: ${MINIO_REGION:us-east-1}
  presigned-upload-expiry-seconds: ${MINIO_PRESIGNED_UPLOAD_EXPIRY:3600}
  presigned-download-expiry-seconds: ${MINIO_PRESIGNED_DOWNLOAD_EXPIRY:1800}
  public-url: ${MINIO_PUBLIC_URL}

media:
  max-file-size: ${MEDIA_MAX_FILE_SIZE:2147483648}
  allowed-mime-types: ${MEDIA_ALLOWED_MIME_TYPES:image/jpeg,image/png,image/webp,image/gif}
  service:
    token: ${MEDIA_SERVICE_TOKEN:}

server:
  port: 8081